<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <div id="container">
            <div class = 'buttons'>
                <button class ='choice'>Rock</button>
                <button class ='choice'>Paper</button>
                <button class ='choice'>Scissors</button>
            </div>
            <div class = 'results'>

            </div>
    </div>
        <script src="script.js"></script>
    </body>
    <script>

        let playerWins = 0;
        let computerWins = 0;
        let resetGame = false;


        // Create randomized choice by computer
        function getComputerChoice(){
            const choice = ['Rock', 'Paper', 'Scissors']
            return choice[Math.floor(Math.random()*3)]
        };

        // Display results of the round
        function displayResults(playerSelection) {

            const results = document.querySelector('.results')
            results.innerText = ''
            const computerSelection = getComputerChoice();
            const winner = playRound(playerSelection, computerSelection)
            


            const p1 = document.createElement('p');
            p1.textContent = 'You throw...' + playerSelection;
            results.appendChild(p1);
            p2 = document.createElement('p');
            p2.textContent = 'The computer throws...' + computerSelection;
            results.appendChild(p2);
            const h3 = document.createElement('h3');
            h3.textContent = winner
            results.appendChild(h3)
        }

        // Play one round of Rock, Paper, Scissors
        function playRound(playerSelection, computerSelection){
            if (playerSelection === computerSelection){
                return 'You tied this round!'
            } else if (playerSelection == 'Rock') {
                if (computerSelection == 'Paper') {
                    computerWins+=1
                    return 'You Lose! Paper beats Rock'
                } else {
                    playerWins+=1
                    return 'You win! Rock beats Scissors'
                }
            } else if (playerSelection == 'Scissors') {
                if (computerSelection == 'Rock') {
                    computerWins+=1
                    return 'You Lose! Rock beats Scissors'
                } else {
                    playerWins+=1
                    return 'You win! Scissors beat Paper'
                }
            }
            else if (playerSelection == 'Paper') {
                if (computerSelection == 'Scissors') {
                    computerWins+=1
                    return 'You Lose! Scissors beat Paper'
                } else {
                    playerWins+=1
                    return 'You win! Paper beats Rock'

                }
            } else {
                return "Something went wrong"
            }
        }

        

            
            const container = document.querySelector('#container')
            const buttons = document.querySelector('.buttons')

            const points = document.createElement('points')
            points.innerText = 'You: ' + playerWins + "\n Computer: " + computerWins 
            container.insertBefore(points, buttons)
            const choices = document.querySelectorAll('.choice')


            choices.forEach(function(button) {
                button.addEventListener('click', () => {
                    const results = document.querySelector('.results')
                    const playerSelection = button.innerText
                    if(resetGame) {
                        playerWins = 0
                        computerWins = 0
                        results.innerText = ''
                        resetGame = false
                    }
                    displayResults(playerSelection)
                    points.innerText = 'You: ' + playerWins + '\n Computer: ' + computerWins 
                    container.insertBefore(points, buttons)

         
                    if (playerWins == 5 || computerWins == 5) {
                        const gameOver = document.createElement('h2')
                        const finalWinner = (playerWins == 5) ? 'You earned 5 points! You win!' : 'The computer earned 5 points. Sorry, you lost.'
                        gameOver.textContent = finalWinner
                        gameOver.style.color = 'red'
                        results.appendChild(gameOver)
                        resetGame = true;
    
                    }
    
                    

                })
            
            })
        
        
        
            



        // }


    </script>
</html>